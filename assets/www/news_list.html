<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>新闻</title>
    <!--css-->
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <link rel="stylesheet" type="text/css" href="css/image_style.css"/>
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.3.2.css"/>
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.iscrollview.css"/>
    <!--javascript-->
    <script src="js/jquery-1.9.1.js"></script>
    <script src="js/initialization.js"></script>
    <script src="js/jquery.mobile-1.3.2.js"></script>
    <!--<script src="js/cordova.js"></script>-->
    <script src="js/iScroll.js"></script>
    <script src="js/jquery.mobile.iscrollview.js"></script>
    <script src="js/ajax.js"></script>
    <script src="js/tool.js"></script>
    <script type="text/javascript">
        function bindLink(doc) {
            $(doc).each(
                    function () {
                        $(this).bind("tap", function () {
                                    getShowPost($(this).attr("path"));
                                }
                        )
                    })
        }
        ;
        function getShowPost(url) {
            var getObj = new GetTo(url);
            getObj.storageName = "post";
            getObj.send();
           console.log(getObj.storageName);
            window.location.href = "news_show.html";
        }
        ;
        $(document).bind("pageinit", function () {
            var params = sessionStorage.getItem("posts");
            var jsonObj = flashToJson(params)
            $("[data-role='listview']").append(buildHtml(jsonObj));
            $(".news-content").trigger("create")
            $('.news-list').listview('refresh');
            bindLink("a.ui-link")
        });
        $(document).delegate(".index-page", "pageinit", function (event) {
            $(".iscroll-wrapper", this).bind({
                "iscroll_onpulldown": onPullDown,
                "iscroll_onpullup": onPullUp
            });
        });
    </script>
</head>
<body>
　
<div data-role="page" data-theme="c" id="news" class="index-page">
    <!-- /header -->　
    <div data-role="header" data-theme="c">
        <a href="index.html" data-mini="true" data-icon="arrow-l" data-ajax=false>主菜单</a>
        <a href="news_theme.html" data-json="false" data-mini="true" class="addButton ui-btn-right" data-icon="forward">返回</a>

        <h1>新闻</h1>
    </div>
    <!-- /content --> 　
    <div data-role="content" class="news-content" data-iscroll>
        <div class="iscroll-pulldown">
            <span class="iscroll-pull-icon"></span>
            <span class="iscroll-pull-label" data-iscroll-pulled-text="刷新">加载中</span>
        </div>
        <ul data-role="listview" data-theme="c" class="news-list">
        </ul>
        <div class="iscroll-pullup">
            <span class="iscroll-pull-icon"></span>
            <span class="iscroll-pull-label" data-iscroll-pulled-text="下一页">加载中</span>
        </div>
    </div>
    <div data-role="footer" data-position="fixed" data-tap-toggle="false" data-transition="none" data-id="footer"></div>
</div>
<!-- /page -->
<a id="pullAjaxUrl" href="api/posts?posts_page=" data-page="1"></a>
</body>
</html>